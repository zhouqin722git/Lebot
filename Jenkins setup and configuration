# jenkins 相关部署及配置

##安装

1、选择相应的操作系统，下载LTS版本的Jenkins安装包： https://jenkins.io/download/

2、上传到操作系统，如：Linux, 

3、查看jenkins.war所在目录，执行：java -jar jenkins.war

4、访问ip:8080, 按照提示步骤进行安装。

## 配置


 
安装部署1：CentOS rpm方式安装jenkins及卸载(非war包)
https://blog.csdn.net/li_magic/article/details/83143069

1.进入jenkins-2.147-1.1.noarch.rpm存放目录导入jenkins密钥，执行如下命令：
sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo
sudo rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key

2、2. 然后安装jenkins，执行如下命令：
rpm -ivh jenkins-2.152-1.1.noarch.rpm

3.修改jenkins服务端口（我这里设置的是18080）：
vim /etc/sysconfig/jenkins
JENKINS_PORT="18080"

4、启动jenkins： service jenkins start

5、.如果提示失败，解决办法（成功，忽略此步骤）：
修改jenkins配置文件中JDK路径是否与本地路径一致，不一致则将Java的正确路径加入
vim /etc/init.d/jenkins

6.访问http://ip:端口/jenkins即可看到如下界面

7.看到这界面jenkins就安装完成了，然后查看密码文件的密码复制到框里点击Continue进入选择插件安装界面选择,我选的第一个

（推荐安装）或者第二个(自定义安装)

8.等一会插件安装完毕进入创建用户界面：
创建用户之后就可以使用jenkins了

9.彻底卸载jenkins
##卸载
 1007  service jenkins stop
 1008  yum clean all
 1009  yum -y remove jenkins
 1010  rm -rf /var/cache/jenkins/
 1011  rm -rf /var/lib/jenkins/


#publish over ssh 插件：远程连接ssh
 https://www.cnblogs.com/zhchoutai/p/8869898.html
 
 前提：验证远程机器是否已经开启ssh服务
 参考文档：https://jingyan.baidu.com/article/0f5fb099388b196d8334eac7.html
 
 1、若报错：ERROR: Exception when publishing, exception message [Exec timed out or was interrupted after 120,016 ms]
   原因： 在使用Jenkins进行远程部署时，构建后执行的脚本没有正常退出导致。
   解决方案：
   Make it Exec in PTY. (Please tick the check-box as shown in attached screenshot)
   在配置->SSH Publisher的高级中，勾选上EXEC in PTY


 2、若报错：ERROR: Exception when publishing, exception message [Exec timed out or was interrupted after 120,530 ms]
   原因：
   解决方案：
   在配置->SSH Publisher的高级中，将Exectimeout的值变大，如720000


##Robot FrameWork插件：Robot Framework plugin

    1. 安装插件；
    
    2. 新增slave节点：
           名称：如 slave--237
           远程工作目录： 即脚本的存放目录
           启动方式：Launch agent agents via SSH
                   主机、用户名、密码
    
    3. 配置：
           ① General： 限制项目的运行节点，及脚本的存放节点
           ② 源码管理： 无
           ③ 构建： 执行shell(前提：部署好 自动化环境)
               cd /usr/local/hes_scrpits/PyMulti
               pybot --PYTHONPATH  configs:keywords:. ./Testsuite/smoke.txt
